<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Ruang Sejarah</title>
  <!-- plugins:css -->
  <link rel="stylesheet" href="vendors/feather/feather.css">
  <link rel="stylesheet" href="vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" href="vendors/css/vendor.bundle.base.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <!-- endinject -->
  <!-- Plugin css for this page -->
  <link rel="stylesheet" href="vendors/datatables.net-bs4/dataTables.bootstrap4.css">
  <link rel="stylesheet" href="vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" type="text/css" href="js/select.dataTables.min.css">
  <link rel="stylesheet" href="vendors/mdi/css/materialdesignicons.min.css">
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <link rel="stylesheet" href="css/vertical-layout-light/style.css">
  <!-- Lightbox CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" rel="stylesheet">

    <!-- Lightbox JS -->
    

    

  <!-- SweetAlert2 -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>




  <!-- endinject -->
  <link rel="shortcut icon" href="images/favicon.png" />
  <style>
.quiz-card {
    background-color: transparent;
    border: none;
    color: #fff;
    height: 100vh;
    overflow-y: scroll;
}

.quiz-card .card-body {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
}

.question-image {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0 auto;
    padding: 10px 0;
}

.question-text {
    text-align: center;
}


.quiz-card .answer-btn {
    margin: 3px;
    width: 100%;
    height: 100px;
    font-size: 1.2rem;
    font-weight: bold;
    border-radius: 12px;
    color: black;
    transition: background-color 0.3s;
}

.answer-btn-red {
    background-color: #e46262;
    border-color: transparent;
}

.answer-btn-green {
    background-color: #5ce783;
    border-color: transparent;
}

.answer-btn-blue {
    background-color: #6598e4;
    border-color: transparent;
}

.answer-btn-yellow {
    background-color: #c8eb5d;
    border-color: transparent;
}


.quiz-card .answer-btn:hover {
    background-color: #343a40;
}

.lightbox {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    justify-content: center;
    align-items: center;
}

.lb-image {
    max-width: 90%;
    max-height: 80%;
    transform-origin: center;
}

.lightbox button {
    position: absolute;
    padding: 10px 15px;
    background-color: rgba(255, 255, 255, 0.7);
    border: none;
    border-radius: 20px;
    font-size: 16px;
    transition: background-color 0.3s;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.lightbox button:hover {
    background-color: rgba(255, 255, 255, 0.9);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
}

.lb-zoom-in {
    top: 10px;
    right: 10px;
}

.lb-zoom-out {
    top: 10px;
    right: 80px;
}

.lb-close {
    bottom: 10px;
    right: 10px;
    background-color: #ff4b5c; 
}

.lb-close:hover {
    background-color: #ff6b7d; 
}

.clickable {
    cursor: pointer;
}



</style>
</head>

<body class="bg-dark text-white h-100">
    <div class="modal fade" id="quizGuideModal" tabindex="-1" role="dialog" aria-labelledby="quizGuideLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content text-black">
            <div class="modal-header">
              <h5 class="modal-title" id="quizGuideLabel">PETUNJUK PENGERJAAN LATIHAN</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <!-- <p>Welcome to the quiz! Here are some guidelines to help you:</p> -->
              <ol>
                <li>Terdapat 10 soal pilihan ganda.</li>
                <li>Silahkan pilih salah satu dari empat opsi jawaban yang paling benar.</li>
                <li>Perhatikan waktu pengerjaan agar tidak lebih dari 20 detik.</li>
                <li>Apabila jawaban yang dipilih berwarna hijau maka jawaban adalah benar , apabila jawaban yang dipilih berwarna merah maka jawaban adalah salah dan sistem akan langsung memberikan jawaban yang benar.</li>
                <li>Jawaban benar mendapatkan skor 10 dan jawaban salah mendapatkan skor 0.</li>
                <li>Skor akhir akan diberikan setelah proses pengerjaan telah dilakukan semua.</li>
                <li>Good luck!</li>
              </ol>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-dismiss="modal" id="startQuizBtn">Start Quiz</button>
            </div>
          </div>
        </div>
      </div>
      
  <div class="progress" style="height: 5px; position: fixed; top: 0; left: 0; right: 0; z-index: 1050;">
      <div id="timer-progress" class="progress-bar bg-success" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
  </div>
  <div class="container-scroller bg-dark text-white h-100">
      <div class="mt-5 h-100">
          <div class="row justify-content-center align-items-center h-100" >
              <div class="col-md-12">
                  <div class="card quiz-card" id="style-2">
                      <div class="card-header text-center bg-transparent">
                          <h3 class="current-question">Question 1 of 3</h3>
                      </div>
                      <div class="card-body">
                          <div class="row justify-content-center align-items-center h-100">
                              <h2 class="question text-center"></h2>
                          </div>
                          <div class="row justify-content-center answers"></div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox-plus-jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.2.0"></script>
  

<script>
let timeLeft = 20 * 100;
let totalScore = 0;
let currentQuestionIndex = 0;
let timerInterval;
let answered = false;

document.addEventListener('DOMContentLoaded', function() {
    $('#quizGuideModal').modal('show');
});


const questions = [
    {
        question: "Budi Utomo merupakan organisasi yang didirikan oleh para pelajar STOVIA dengan dipimpin seseorang yang bernama..",
        answers: ["Mohammad Hatta", "Ir Soekarno", "Dr Soetomo", "Ki Hajar Dewantara"],
        correct: 2
    },
    {
        question: "Organisasi Budi Utomo didirikan pada tanggal berapa?",
        answers: ["20 Mei 1908", "22 Juni 1908", "20 Januari 1908", "15 April 1908"],
        correct: 0
    },
    {
        question: "Organisasi Budi Utomo dibubarkan secara resmi pada tanggal?",
        answers: ["5 Mei 1925", "7 Juni 1938", "10 Januari 1932", "25 Desember 1935"],
        correct: 3,
    },
    {
        question: "Sarekat Islam menyelenggarakan kongres pertamanya di?",
        answers: ["Surabaya", "Malang", "Jombang", "Aceh"],
        correct: 0
    },
    {
        question: "Pada kongres pertama Sarekat Islamtahun 1913, dipilihnya ketua organisasi Sarekat Islam yang bernama?",
        answers: ["Ir. Soekarno", "Haji Oemar Said Cokroaminoto", "Haji Agus Salim", "Dr. Soetomo"],
        correct: 1,
    },
    {
        question: "Organisasi Muhammadiyah didirikan pada tanggal?",
        answers: ["9 Agustus 1925", "7 November 1912", "18 November 1912", "5 Agustus 1934"],
        correct: 2
    },
    {
        question: "Pada tanggal 1917 K.H Ahmad Dahlan mendirikan seksi perempuan Muhammadiyah dengan nama?",
        answers: ["Dahrma Wanita", "Aisyiyah", "Persit", "Gerwani"],
        correct: 1,
    },
    {
        question: "Taman Siswa didirikan oleh tokoh pahlawan nasional yang bernama?",
        answers: ["Ki Hajar Dewantara", "Dr. Wahidin Soedirohoesodo", "Dr. Soetomo", "Haji Agus Salim"],
        correct: 0
    },
    {
        question: "Taman Siswa didirikan pada tanggal 3 Juli 1922 di?",
        answers: ["Banten", "Rembang", "Yogyakarta", "Solo"],
        correct: 2,
    },
    {
        question: "Taman siswa memiliki Azas yang terkenal yakni?",
        answers: ["Semangat Belajar, Sukses Kemudian", "Ing Ngarsa Sung Tulada, Ing Madya Mangun Karsa, Tut Wuri Handayani", "Hiduplah Dengan Ilmu Untuk Meraih Hidup", "Memayu Hayuning Bawono"],
        correct: 1,
    },
];

document.getElementById('startQuizBtn').addEventListener('click', function() {
    loadQuestion();
    startTimer();
});


const buttonColors = ['answer-btn-red', 'answer-btn-green', 'answer-btn-blue', 'answer-btn-yellow'];

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}


function loadQuestion() {
    const questionContainer = document.querySelector('.question');
    const answersContainer = document.querySelector('.answers');


    if (currentQuestionIndex >= questions.length) {
        endQuiz();
        return;
    }

    const currentQuestion = questions[currentQuestionIndex];
    
    // Clear the question container content
    questionContainer.innerHTML = '';  

    if (currentQuestion.image && currentQuestion.image !== "") {
        const imgElement = document.createElement('img');
        imgElement.src = currentQuestion.image;
        imgElement.alt = "Quiz Image";
        imgElement.className = 'question-image clickable';  // Clickable indicates it can be opened in lightbox
        questionContainer.appendChild(imgElement);

        imgElement.addEventListener('click', function() {
            showLightbox(currentQuestion.image);
        });
    }

    // Add the text of the question below the image (if there is one)
    const questionText = document.createElement('h2');
    questionText.textContent = currentQuestion.question;
    questionText.className = 'question-text';  // Add some styling
    questionContainer.appendChild(questionText);

    // Clear previous answers
    answersContainer.innerHTML = '';

    // Shuffle color classes for answers
    shuffleArray(buttonColors);

    
    const hasLongAnswer = currentQuestion.answers.some(answer => answer.length > 10);
    let colClass = hasLongAnswer ? 'col-12' : 'col-5';

    currentQuestion.answers.forEach((answer, index) => {
        let button = document.createElement('button');
        button.className = `btn answer-btn col-md-2 ${colClass} ${buttonColors[index]}`;
        button.textContent = answer;
        button.setAttribute('data-answer', index === currentQuestion.correct ? 'true' : 'false');

        button.addEventListener('click', function() {
            if (!answered) {
                answered = true;
                clearInterval(timerInterval);
                checkAnswer(this);
            }
        });

        answersContainer.appendChild(button);
    });

    document.querySelector('.current-question').textContent = `Question ${currentQuestionIndex + 1} of ${questions.length}`;
}



let quizOver = false;  // Flag to check if the quiz has ended

function startTimer() {
    clearInterval(timerInterval);  
    timeLeft = 20 * 100;  // Reset the time to 20 seconds.

    const progressBar = document.getElementById('timer-progress');
    
    // Remove any potential transition animation to instantly set the width
    progressBar.style.transition = 'none';
    progressBar.style.width = '100%';

    // Restore the transition animation for smooth decrement
    setTimeout(() => {
        progressBar.style.transition = ''; 
    }, 50);  // Delay slightly to ensure the above style is applied first

    timerInterval = setInterval(function() {
        progressBar.style.width = `${(timeLeft / (20 * 100)) * 100}%`;
        timeLeft--;

        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            if (!quizOver) {
                checkAnswer();
            } else {
                window.location.href = "index.html";  // Redirect to index.html
            }
        }
    }, 10);
}


function checkAnswer(selectedBtn) {
    const buttons = document.querySelectorAll('.answer-btn');
    let correctSelected = false;
    buttons.forEach(btn => {
        if (btn.getAttribute('data-answer') === 'true') {
            if (btn === selectedBtn) correctSelected = true; 
            btn.style.backgroundColor = "green";
        } else {
            btn.style.backgroundColor = "red";
        }
    });

    // 2. Modify the score calculation.
    if (correctSelected) {
        totalScore += 10;  // Add 10 points for a correct answer.
        Swal.fire({
            icon: 'success',
            title: 'Hooray!',
            text: 'You got it right!',
            didClose: () => nextQuestion()
        });
    } else {
        // 0 points for a wrong answer (so no addition to totalScore).
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Wrong answer!',
            didClose: () => nextQuestion()
        });
    }
}


function nextQuestion() {
    currentQuestionIndex++;
    answered = false;
    loadQuestion();
    startTimer();
}

function endQuiz() {
    quizOver = true;  // Set the quiz over flag to true
    clearInterval(timerInterval);  // Stop the timer
    Swal.fire({
        icon: 'info',
        title: 'Quiz Over!',
        text: `Your score is: ${totalScore}`,
        confirmButtonText: 'Finish Quiz',
        allowOutsideClick: false
    }).then((result) => {
        if (result.isConfirmed) {
            window.location.href = "index.html";  // Redirect to index.html
        }
    });
}
</script>
<script>
function showLightbox(imageSrc) {
    const lightbox = document.createElement('div');
    lightbox.className = 'lightbox';
    lightbox.innerHTML = `
        <img src="${imageSrc}" class="lb-image" />
        <button class="lb-zoom-in">+</button>
        <button class="lb-zoom-out">-</button>
        <button class="lb-close">Close</button>
    `;
    document.body.appendChild(lightbox);

    // Attach event listeners to the lightbox
    attachZoomAndSlide(lightbox);
}

function attachZoomAndSlide(lightbox) {
    const img = lightbox.querySelector('.lb-image');
    const zoomInBtn = lightbox.querySelector('.lb-zoom-in');
    const zoomOutBtn = lightbox.querySelector('.lb-zoom-out');
    const closeBtn = lightbox.querySelector('.lb-close');
    
    let scale = 1;
    let translateX = 0;
    let initialX = null;

    zoomInBtn.addEventListener('click', function() {
        scale += 0.1;
        img.style.transform = `translateX(${translateX}px) scale(${scale})`;
    });

    zoomOutBtn.addEventListener('click', function() {
        scale -= 0.1;
        img.style.transform = `translateX(${translateX}px) scale(${scale})`;
    });

    closeBtn.addEventListener('click', function() {
        document.body.removeChild(lightbox);
    });

    lightbox.addEventListener('mousedown', startDrag);
    lightbox.addEventListener('mousemove', drag);
    lightbox.addEventListener('mouseup', endDrag);
    lightbox.addEventListener('mouseleave', endDrag);
    
    lightbox.addEventListener('touchstart', function(e) {
        if (e.touches.length === 1) {
            startDrag(e.touches[0]);
        }
    });

    lightbox.addEventListener('touchmove', function(e) {
        if (e.touches.length === 1) {
            drag(e.touches[0]);
        }
    });

    lightbox.addEventListener('touchend', endDrag);

    function startDrag(e) {
        initialX = e.clientX - translateX;
    }

    function drag(e) {
        if (initialX === null) return;

        let deltaX = e.clientX - initialX;

        // Calculate boundaries based on the current scale of the image
        const maxSlide = (img.offsetWidth * scale - lightbox.offsetWidth) / 2;

        // Restrict deltaX within the boundaries
        deltaX = Math.max(-maxSlide, Math.min(deltaX, maxSlide));

        translateX = deltaX;
        img.style.transform = `translateX(${translateX}px) scale(${scale})`;
        e.preventDefault();
    }

    function endDrag() {
        initialX = null;
    }
}

  </script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="vendors/js/vendor.bundle.base.js"></script>
<!-- endinject -->
<!-- Plugin js for this page -->
<script src="vendors/chart.js/Chart.min.js"></script>
<script src="vendors/datatables.net/jquery.dataTables.js"></script>
<script src="vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
<script src="js/dataTables.select.min.js"></script>

<!-- End plugin js for this page -->
<!-- inject:js -->
<script src="js/off-canvas.js"></script>
<script src="js/hoverable-collapse.js"></script>
<script src="js/template.js"></script>
<script src="js/settings.js"></script>
<script src="js/todolist.js"></script>
<!-- endinject -->
<!-- Custom js for this page-->
<script src="js/dashboard.js"></script>
<script src="js/Chart.roundedBarCharts.js"></script>
                
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const imgContainer = document.querySelector('.img-container');

    imgContainer.addEventListener('mouseenter', function() {
        const hoverMessage = this.querySelector('.hover-message');
        hoverMessage.style.animation = 'none'; // Pause animation
        setTimeout(() => {
            hoverMessage.style.animation = ''; // Resume animation
        }, 10); // Short delay to reset the animation
    });
});

</script>  
<!-- End custom js for this page-->

</body>



</html>

